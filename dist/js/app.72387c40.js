(function(e){function t(t){for(var n,r,a=t[0],c=t[1],u=t[2],d=0,m=[];d<a.length;d++)r=a[d],i[r]&&m.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],n=!0,a=1;a<s.length;a++){var c=s[a];0!==i[c]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=s[0]))}return e}var n={},i={0:0},o=[];function r(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=n,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;o.push([0,1]),s()})({"/Rr3":function(e,t,s){"use strict";var n=s("UduD"),i=s.n(n);i.a},0:function(e,t,s){e.exports=s("Vtdi")},20:function(e,t){},"8U93":function(e,t,s){"use strict";var n=s("NR5E"),i=s.n(n);i.a},C39V:function(e,t,s){"use strict";var n=s("CskQ"),i=s.n(n);i.a},CAeB:function(e,t,s){"use strict";var n=s("mgpI"),i=s.n(n);i.a},CskQ:function(e,t,s){},"DK/g":function(e,t,s){"use strict";var n=s("Q8cg"),i=s.n(n);i.a},H8Of:function(e,t,s){"use strict";var n=s("Td32"),i=s.n(n);i.a},K0qE:function(e,t,s){"use strict";var n=s("i6A0"),i=s.n(n);i.a},NQ1T:function(e,t,s){},NR5E:function(e,t,s){},NwMJ:function(e,t,s){},O0XT:function(e,t,s){},Q8cg:function(e,t,s){},Qdve:function(e,t,s){"use strict";var n=s("NwMJ"),i=s.n(n);i.a},RnhZ:function(e,t,s){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function i(e){var t=o(e);return s(t)}function o(e){var t=n[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id="RnhZ"},S1Y4:function(e,t,s){},StN8:function(e,t,s){"use strict";var n=s("gJm7"),i=s.n(n);i.a},Td32:function(e,t,s){},UduD:function(e,t,s){},Vtdi:function(e,t,s){"use strict";s.r(t);s("a1Th"),s("yt8O"),s("VRzm");var n=s("Kw5r"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("app-header",{on:{openAbout:e.toggleAbout}}),s("about",{ref:"about"}),s("notifications",{attrs:{group:"foo"}}),s("div",{ref:"curtain",staticClass:"curtain",on:{click:e.toggleAbout}}),s("router-view"),s("login-modal"),s("footer-navbar"),s("v-dialog")],1)},o=[],r={convertCoordsToAddress:a};function a(e){var t=new google.maps.Geocoder;return new Promise(function(s,n){t.geocode({location:e},function(e,t){"OK"===t&&e[0]?s(e[0].formatted_address):n()})})}var c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"app-header"},[s("section",{staticClass:"container flex space-between"},[s("router-link",{attrs:{to:"/"}},[s("div",{staticClass:"logo"},[s("div",{staticClass:"logo-circle-1"}),s("div",{staticClass:"logo-circle-2"}),s("div",{staticClass:"logo-circle-3"}),s("h1",[e._v("Fixity")])])]),s("div",{staticClass:"site-navigation flex align-center"},[s("header-navbar"),s("div",{staticClass:"navbar-icon",on:{click:function(t){e.$emit("openAbout")}}},[s("font-awesome-icon",{staticClass:"about",attrs:{icon:"info-circle"}}),s("h6",[e._v("About")])],1)],1)],1)])},u=[],l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"header-navbar"},[s("router-link",{attrs:{to:"/"}},[s("div",{staticClass:"navbar-icon"},[s("font-awesome-icon",{attrs:{icon:"home"}}),s("h6",[e._v("Home")])],1)]),s("router-link",{attrs:{to:"/issueAdd"}},[s("div",{staticClass:"navbar-icon"},[s("font-awesome-icon",{attrs:{icon:"plus"}}),s("h6",[e._v("Report")])],1)]),s("router-link",{attrs:{to:"/user"}},[s("div",{staticClass:"navbar-icon"},[s("font-awesome-icon",{attrs:{icon:"user-circle"}}),s("h6",[e._v("Profile")])],1)])],1)},d=[],m={name:"headerNavbar"},f=m,p=(s("DK/g"),s("KHd+")),h=Object(p["a"])(f,l,d,!1,null,"0c2c1870",null),g=h.exports,v={name:"appHeader",components:{headerNavbar:g}},y=v,b=(s("StN8"),Object(p["a"])(y,c,u,!1,null,"358fd430",null)),w=b.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("div",{staticClass:"footer-navbar space-evenly mobile"},[s("router-link",{attrs:{to:"/"}},[s("div",{staticClass:"navbar-icon"},[s("font-awesome-icon",{attrs:{icon:"home"}}),s("h6",[e._v("Home")])],1)]),s("router-link",{attrs:{to:"/issueAdd"}},[s("div",{staticClass:"navbar-icon"},[s("font-awesome-icon",{attrs:{icon:"plus"}}),s("h6",[e._v("Report")])],1)]),s("router-link",{attrs:{to:"/user"}},[s("div",{staticClass:"navbar-icon"},[s("font-awesome-icon",{attrs:{icon:"user-circle"}}),s("h6",[e._v("Profile")])],1)])],1),e._m(0)])},j=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"footer-navbar space-evenly desktop"},[s("span",[e._v("Â© CoffeeRights")])])}],C={name:"footerNavbar"},k=C,I=(s("C39V"),Object(p["a"])(k,_,j,!1,null,"b0c9339c",null)),O=I.exports,x=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},S=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"about"},[s("h2",[e._v("The App")]),s("p",[e._v("Lorem ipsum lorem ipsum.")]),s("h2",[e._v("The Developers")]),s("h3",[e._v("Herut Yona")]),s("p",[e._v("Lorem ipsum lorem ipsum.")]),s("h3",[e._v("Kareen Ben Ari")]),s("p",[e._v("Lorem ipsum lorem ipsum.")]),s("h3",[e._v("Mark Kopolov")]),s("p",[e._v("Lorem ipsum lorem ipsum.")])])}],$={name:"about"},L=$,U=(s("nVo3"),Object(p["a"])(L,x,S,!1,null,"044a56b8",null)),N=U.exports,D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("modal",{attrs:{name:"loginModal",transition:"pop-out",width:e.modalWidth,height:400}},[s("div",{staticClass:"box"},[s("div",{staticClass:"box-part",attrs:{id:"bp-left"}},[s("div",{staticClass:"partition",attrs:{id:"partition-register"}},[s("div",{staticClass:"partition-title"},[e._v("CREATE ACCOUNT/LOGIN")]),s("div",{staticClass:"partition-form"},[s("form",{attrs:{autocomplete:"false"}},[s("div",{staticClass:"autocomplete-fix"},[s("input",{attrs:{type:"password"}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{id:"n-username",type:"text",placeholder:"Username"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{id:"n-password2",type:"password",placeholder:"Password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),s("div",{staticStyle:{"margin-top":"42px"}}),s("div",{staticClass:"button-set"},[s("button",{attrs:{id:"goto-signin-btn"},on:{click:e.doLogin}},[e._v("Sign In")]),s("button",{attrs:{id:"register-btn"},on:{click:e.doRegister}},[e._v("Register")]),s("button",{attrs:{id:"demo-btn"},on:{click:e.setDemo}},[e._v("Continue in demo mode")])])])])]),s("div",{staticClass:"box-part",attrs:{id:"bp-right"}},[s("div",{staticClass:"partition",attrs:{id:"partition-register"}},[s("div",{staticClass:"partition-title"},[e._v("LOGGING IN WILL LET YOU")]),s("ul",{staticClass:"box-messages"},[s("li",[e._v("Comment")]),s("li",[e._v("React to issues")]),s("li",[e._v("Keep track of issues you submitted")]),s("li",[e._v("Tell other users if an issue has been fixed")])])])])])])},A=[],T=s("oyJW"),M=s("vDqi"),P=s.n(M),E="/user";function z(e){return P.a.put("".concat(E,"/").concat(e._id),e).then(function(e){return e.data}).catch(function(e){return console.warn(e)})}function R(e){return P.a.put("".concat(E),e).then(function(e){return e.data}).catch(function(e){return console.warn(e)})}function J(e){return P.a.post("".concat(E),e).then(function(e){return e.data}).catch(function(e){return console.warn(e)})}var B,V,W,K={updateUser:z,registerUser:J,login:R},Q="user/mutations/setCurrLoc",Y="user/mutations/setUser",F="user/mutations/setHasBeenPrompted",H="user/getters/getUser",G="user/getters/getCurrLoc",q="user/getters/getHasBeenPrompted",X="user/actions/loadCurrLoc",Z="user/actions/getCurrLoc",ee="user/actions/signup",te={state:{user:null,currLoc:null,hasBeenPrompted:!1},mutations:(B={},Object(T["a"])(B,Q,function(e,t){var s=t.currLoc;e.currLoc=JSON.parse(JSON.stringify(s))}),Object(T["a"])(B,Y,function(e,t){var s=t.user;e.user=s}),Object(T["a"])(B,F,function(e){e.hasBeenPrompted=!e.hasBeenPrompted}),B),getters:(V={},Object(T["a"])(V,q,function(e){return e.hasBeenPrompted}),Object(T["a"])(V,H,function(e){return e.user}),Object(T["a"])(V,G,function(e){return JSON.parse(JSON.stringify(e.currLoc))}),V),actions:(W={},Object(T["a"])(W,X,function(e){return new Promise(function(e,t){navigator.geolocation.watchPosition(e,t)}).then(function(t){var s=t.coords;return e.commit({type:Q,currLoc:{lat:s.latitude,lng:s.longitude}}),s})}),Object(T["a"])(W,Z,function(e,t){var s=t.user;return K.updateUser(s).then(function(t){t.imgUrl=t.imgUrl[0],e.commit({type:Y,user:t})}).catch(function(e){return console.warn(e)})}),Object(T["a"])(W,ee,function(e,t){var s=t.user;return s.imgUrl="",s.isAdmin=!1,s.likes=[],K.registerUser(s).then(function(t){e.commit({type:Y,user:t})}).catch(function(e){return console.warn(e)})}),W)},se=656,ne={name:"loginModal",data:function(){return{modalWidth:se,user:{username:"",password:""}}},methods:{setDemo:function(){this.$socket.emit("loginUser",{username:"demo",password:"demo"}),this.$modal.hide("loginModal")},doRegister:function(){var e=this;console.log("starting register");var t=JSON.parse(JSON.stringify(this.user));this.$store.dispatch({type:ee,user:t}).then(function(t){e.$modal.hide("loginModal")})},doLogin:function(){var e=JSON.parse(JSON.stringify(this.user));this.$socket.emit("loginUser",e),this.$modal.hide("loginModal")}},created:function(){this.modalWidth=window.innerWidth<se?se/2:se}},ie=ne,oe=(s("kMsj"),Object(p["a"])(ie,D,A,!1,null,null,null)),re=oe.exports,ae="/comment";function ce(e){return P.a.get("".concat(ae),{params:{getBy:e}}).then(function(e){return e.data}).catch(function(e){return console.warn(e)})}function ue(e){return P.a.post("".concat(ae),e).then(function(e){return e.data}).catch(function(e){return console.warn(e)})}function le(e){return P.a.delete("".concat(ae),{params:{deleteBy:e}}).then(function(){return e}).catch(function(e){return console.warn(e)})}var de,me,fe={addComment:ue,getComments:ce,deleteComments:le},pe="comments/action/getComments",he="comment/action/addComment",ge="comments/action/deleteComments",ve="comments/mutations/setComments",ye="comment/mutations/setComment",be="comment/getters/loadComments",we={state:{comments:[]},mutations:(de={},Object(T["a"])(de,ve,function(e,t){var s=t.comments;e.comments=s}),Object(T["a"])(de,ye,function(e,t){var s=t.comment;e.comments.push(s)}),de),getters:Object(T["a"])({},be,function(e){return e.comments}),actions:(me={},Object(T["a"])(me,pe,function(e,t){var s=t.getBy;return fe.getComments(s).then(function(t){return e.commit({type:ve,comments:t}),t}).catch(function(e){console.warn(e)})}),Object(T["a"])(me,he,function(e,t){var s=t.payload;return fe.addComment(s.comment).then(function(t){return t.commenter=s.commenter,e.commit({type:ye,comment:t}),t}).catch(function(e){return console.warn(e)})}),Object(T["a"])(me,ge,function(e,t){var s=t.deleteBy;return fe.deleteComments(s).then(function(t){var s=e.getters[be];s=t._id?s.filter(function(e){return e._id!==t._id}):[],e.commit({type:ve,comments:s})}).catch(function(e){return console.warn(e)})}),me)},_e=s("yT7P"),je=(s("INYr"),s("Po9p"),"/issue");function Ce(e){return P.a.post("".concat(je),e).then(function(e){return e.data}).catch(function(e){return console.warn(e)})}function ke(e){return P.a.get(je,{params:{getBy:e}}).then(function(e){return e.data}).catch(function(e){return console.warn(e),Promise.reject(e)})}function Ie(e){return P.a.get("".concat(je,"/").concat(e)).then(function(e){return e.data}).catch(function(e){return console.warn(e),Promise.reject(e)})}function Oe(e,t){return P.a.put("".concat(je,"/").concat(e),t).then(function(e){return e.data}).catch(function(e){return console.warn(e),Promise.reject(e)})}function xe(e){return P.a.delete("".concat(je,"/").concat(e)).then(function(){return e}).catch(function(e){return console.warn(e)})}var Se,$e,Le,Ue={query:ke,getIssueById:Ie,updateIssue:Oe,addIssue:Ce,deleteIssue:xe},Ne="issue/mutations/setIssues",De="issue/mutations/setIssuesView",Ae="issue/mutations/addIssue",Te="issue/getters/issuesToDisplay",Me="issue/getters/markersToDisplay",Pe="issue/getters/issuesView",Ee="issue/actions/loadIssues",ze="issue/actions/getIssueById",Re="issue/actions/updateIssue",Je="issue/actions/deleteIssue",Be={state:{issues:null,issuesView:"list"},mutations:(Se={},Object(T["a"])(Se,Ne,function(e,t){var s=t.issues;e.issues=s}),Object(T["a"])(Se,Re,function(e,t){var s=t.updatedIssue,n=e.issues.findIndex(function(e){return e._id===s._id});e.issues.splice(n,1,s)}),Object(T["a"])(Se,Ae,function(e,t){var s=t.issueToSubmit;e.issues.push(s)}),Object(T["a"])(Se,De,function(e,t){var s=t.viewType;e.issuesView=s}),Se),getters:($e={},Object(T["a"])($e,Te,function(e){return e.issues}),Object(T["a"])($e,Me,function(e){return e.issues.map(function(e){return{position:Object(_e["a"])({},e.loc)}})}),Object(T["a"])($e,Pe,function(e){return e.issuesView}),$e),actions:(Le={},Object(T["a"])(Le,Ee,function(e,t){var s=t.getBy;return s||(s={}),Ue.query(s).then(function(t){return e.commit({type:Ne,issues:t}),t})}),Object(T["a"])(Le,ze,function(e,t){var s=t.issueId;return Ue.getIssueById(s).then(function(e){return e})}),Object(T["a"])(Le,Re,function(e,t){var s=t.updatedIssue;return Ue.updateIssue(s._id,s).then(function(t){return e.commit({type:Re,updatedIssue:t}),t})}),Object(T["a"])(Le,Je,function(e,t){var s=t.issueId;Ue.deleteIssue(s).then(function(t){var s=e.getters[Te];s=s.filter(function(e){return e._id!==t}),e.commit({type:Ne,issues:s})}).catch(function(e){return console.warn(e)})}),Le)},Ve={name:"app",created:function(){this.$store.dispatch({type:Ee}),this.$store.dispatch({type:X})},sockets:{issueAdded:function(e){this.$store.commit({type:Ae,issueToSubmit:e})},userFound:function(e){this.$store.commit({type:Y,user:e})},errorAdding:function(){console.log("errorAdding")},issueLikesChanged:function(e){this.$store.commit({type:Re,updatedIssue:e})},commentReceived:function(e){this.$store.commit({type:ye,comment:e})}},methods:{toggleAbout:function(){this.$refs.about.$el.classList.toggle("about-open"),this.$refs.curtain.classList.toggle("curtain-show")}},components:{appHeader:w,footerNavbar:O,about:N,loginModal:re}},We=Ve,Ke=(s("CAeB"),Object(p["a"])(We,i,o,!1,null,"3e62fc61",null)),Qe=Ke.exports,Ye=s("jE9Z"),Fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"home"},[e._m(0),s("section",{staticClass:"main container"},[s("div",{staticClass:"view-pick"},[s("font-awesome-icon",{ref:"listIcon",staticClass:"active",attrs:{icon:"list-ul"},on:{click:function(t){e.changeCurrView("list")}}}),e._v(" \n      | \n      "),s("font-awesome-icon",{ref:"mapIcon",attrs:{icon:"map-marked-alt"},on:{click:function(t){e.changeCurrView("map")}}})],1),s("autoComplete",{on:{place_changed:e.setCurrLoc},nativeOn:{change:function(t){return e.isAddressEmpty(t)}}}),e.issues?s("issue-list-cmp",{directives:[{name:"show",rawName:"v-show",value:"list"===e.currView,expression:"currView === 'list'"}],attrs:{mapLoaded:e.mapLoaded,currLoc:e.center,issues:e.issues}}):s("img",{staticClass:"loading-gif",attrs:{src:"img/loading.gif"}}),s("GmapMap",{directives:[{name:"show",rawName:"v-show",value:"map"===e.currView,expression:"currView === 'map'"}],ref:"map",attrs:{center:e.center,zoom:17,"map-type-id":"terrain"}},[s("GmapMarker",{attrs:{position:e.center,clickable:!0,draggable:!1,animation:2}}),e._l(e.issues,function(t){return s("GmapMarker",{key:t._id,attrs:{position:t.loc,clickable:!0,draggable:!1,icon:"img/map-icons/"+t.category+"-"+t.status+".png"},on:{click:function(s){e.openInfoWindow(t)}}})}),s("gmap-info-window",{attrs:{options:{maxWidth:300},position:e.infoWindow.position,opened:e.infoWindow.open},on:{closeclick:function(t){e.infoWindow.open=!1}}},[s("div",{staticClass:"issue-info-window flex column",domProps:{innerHTML:e._s(e.infoWindow.template)},on:{click:e.goToIssue}})])],2)],1)])},He=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"site-entrance flex column justify-center"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"title"},[e._v("Be the change you wish to see in the world.")]),s("div",{staticClass:"subtitles"},[s("h3",[e._v("Report issues around you for the benefit of others.")]),s("h3",[e._v("Form groups to make your city a better place.")])])])])}],Ge=(s("f3/d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"issue-list"},[s("ul",{staticClass:"clean-list"},e._l(e.issuesToDisplay,function(t){return s("li",{key:t._id,staticClass:"issue"},[s("router-link",{attrs:{to:"/issue/"+t._id}},[e.mapLoaded?s("issue-preview-cmp",{attrs:{issue:t}}):e._e()],1)],1)}))])}),qe=[],Xe=(s("rGqo"),s("Vd3H"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"issue-preview flex column space-between"},[s("carousel",{attrs:{perPage:1,autoplay:!0,autoplayTimeout:2e3,paginationEnabled:!1,loop:!0}},e._l(e.issue.imgUrls,function(t){return s("slide",{key:t},[s("div",{staticClass:"issue-img",style:{backgroundImage:"url('"+t+"')",backgroundSize:e.issueImgSize},attrs:{title:e.issue.title}})])})),s("div",{staticClass:"issue-info"},[s("div",{staticClass:"issue-header flex space-between"},[s("h2",[e._v(e._s(e.issue.title))]),"closed"===e.issue.status?s("div",{staticClass:"resolved-stamp flex"},[s("font-awesome-icon",{attrs:{icon:"check"}}),s("h3",[e._v("Issue Resolved")])],1):e._e()]),s("h3",{staticClass:"issue-distance"},[e._v(e._s(e.issue.distance)+" "+e._s(e._f("distanceUnit")(e.issue.distance)))]),s("h3",[e._v(e._s(e.issueAddress))]),s("h4",[e._v(e._s(e.issue.category))])]),s("div",{staticClass:"issue-footer flex space-between"},[s("h5",{staticClass:"issue-time"},[e._v("Reported "+e._s(e._f("relativeTime")(e.issue.createdAt)))]),s("issue-likes-cmp",{attrs:{issue:e.issue}})],1)],1)}),Ze=[];function et(e,t){var s=6371,n=e.lat,i=e.lng,o=t.lat,r=t.lng,a=tt(o-n),c=tt(r-i),u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(tt(n))*Math.cos(tt(o))*Math.sin(c/2)*Math.sin(c/2),l=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),d=s*l;return d}function tt(e){return e*(Math.PI/180)}var st={getDistanceFromLatLngInKm:et},nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"issue-likes flex column"},[s("div",{ref:"likesCounts",staticClass:"likes-counts flex space-around"},[s("span",[e._v(e._s(e.issue.likes.likeHappy))]),s("span",[e._v(e._s(e.issue.likes.likeSad))]),s("span",[e._v(e._s(e.issue.likes.likeAngry))]),s("span",[e._v(e._s(e.issue.likes.likeShocked))]),s("span",[e._v(e._s(e.issue.likes.likeDisgusted))])]),s("div",{staticClass:"emojis"},[s("span",{ref:"likeHappy",attrs:{title:"Happy"},on:{click:function(t){t.preventDefault(),e.changeIssueLikes("likeHappy")}}},[e._v("ðŸ˜ƒ")]),s("span",{ref:"likeSad",attrs:{title:"Sad"},on:{click:function(t){t.preventDefault(),e.changeIssueLikes("likeSad")}}},[e._v("ðŸ˜¢")]),s("span",{ref:"likeAngry",attrs:{title:"Angry"},on:{click:function(t){t.preventDefault(),e.changeIssueLikes("likeAngry")}}},[e._v("ðŸ˜¡")]),s("span",{ref:"likeShocked",attrs:{title:"Shocked"},on:{click:function(t){t.preventDefault(),e.changeIssueLikes("likeShocked")}}},[e._v("ðŸ˜®")]),s("span",{ref:"likeDisgusted",attrs:{title:"Disgusted"},on:{click:function(t){t.preventDefault(),e.changeIssueLikes("likeDisgusted")}}},[e._v("ðŸ¤¢")])])])},it=[],ot=(s("dRSK"),{name:"issueLikes",props:{issue:{type:Object}},mounted:function(){var e=this,t=this.$store.getters[H];if(t){var s=t.likes.find(function(t){return t.issueId===e.issue._id});s&&this.$refs[s.likeType].classList.add("clicked")}},methods:{changeIssueLikes:function(e){var t=this,s=this.$store.getters[H];if(s){var n=JSON.parse(JSON.stringify(s)),i=s.likes,o=i.find(function(e){return e.issueId===t.issue._id});if(o){a=JSON.parse(JSON.stringify(this.issue));var r=n.likes.findIndex(function(e){return e.issueId===t.issue._id});o.likeType===e&&a.likes[e]>0?(a.likes[e]--,n.likes.splice(r,1)):(a.likes[o.likeType]--,a.likes[e]++,n.likes[r].likeType=e),this.$store.dispatch({type:Re,updatedIssue:a}).then(function(){t.updateUser(n),t.$refs[e].classList.toggle("clicked"),t.$refs[o.likeType].classList.toggle("clicked"),console.log("Like updated successfully"),t.$socket.emit("issueLikesChanged",a)}).catch(function(){console.log("Problem liking issue")})}else{var a=JSON.parse(JSON.stringify(this.issue));a.likes[e]++,this.$store.dispatch({type:Re,updatedIssue:a}).then(function(){console.log("Like updated successfully"),n.likes.push({issueId:t.issue._id,likeType:e}),t.updateUser(n),t.$refs[e].classList.toggle("clicked"),t.$socket.emit("issueLikesChanged",a)}).catch(function(){console.log("Problem liking issue")})}}else this.$modal.show("loginModal")},updateUser:function(e){this.$store.dispatch({type:Z,user:e}).then(function(){console.log("User like updated successfully")}).catch(function(){console.log("Problem updating user likes")})}}}),rt=ot,at=(s("yOfz"),Object(p["a"])(rt,nt,it,!1,null,"7d0d2b7e",null)),ct=at.exports,ut={name:"issuePreview",props:{issue:{type:Object}},data:function(){return{issueAddress:"",addressloc:null}},computed:{issueImgSize:function(){return"https://res.cloudinary.com/djewvb6ty/image/upload/v1532962154/placeholder.png"===this.issue.imgUrls[0]?"contain":"cover"}},mounted:function(){var e=this;r.convertCoordsToAddress(this.issue.loc).then(function(t){return e.issueAddress=t})},components:{issueLikesCmp:ct}},lt=ut,dt=(s("K0qE"),Object(p["a"])(lt,Xe,Ze,!1,null,"80c99ee6",null)),mt=dt.exports,ft={name:"issueList",methods:{issueDistance:function(e,t){return st.getDistanceFromLatLngInKm(e,t)}},computed:{issuesToDisplay:function(){var e=this,t=this.issues.map(function(t){var s=JSON.parse(JSON.stringify(t));return s.distance=e.issueDistance(e.currLoc,t.loc),s});return t=t.sort(function(e,t){return e.distance-t.distance}),t.forEach(function(e){e.distance=e.distance<1?(1e3*e.distance).toFixed(0):e.distance.toFixed(2)}),t}},props:{issues:{type:Array,required:!0},currLoc:{type:Object,required:!0},mapLoaded:null},components:{issuePreviewCmp:mt}},pt=ft,ht=(s("wyWl"),Object(p["a"])(pt,Ge,qe,!1,null,"2192729d",null)),gt=ht.exports,vt=s("e93I"),yt={name:"home",data:function(){return{mapLoaded:!1,currLoc:null,infoWindow:{currIssueId:"",position:{lat:0,lng:0},open:!1,template:""}}},computed:{issues:function(){return this.$store.getters[Te]},currView:function(){return this.$store.getters[Pe]},center:function(){var e=this.$store.getters[G];return this.currLoc||e||{lat:32,lng:34}}},methods:{isAddressEmpty:function(e){e.target.value||(this.currLoc=null)},setCurrLoc:function(e){if(e.name){this.currLoc={};var t=[e.geometry.location.lat(),e.geometry.location.lng()];this.currLoc.lat=t[0],this.currLoc.lng=t[1]}},changeCurrView:function(e){this.$store.state.issueModule.issuesView!==e&&(this.$store.commit({type:De,viewType:e}),this.$refs.listIcon.classList.toggle("active"),this.$refs.mapIcon.classList.toggle("active"))},resolveIssue:function(){var e=this;if("closed"!==this.issue.status){var t=this.$store.getters[USER],s=this.$store.getters[G],n=JSON.parse(JSON.stringify(this.issue)),i=utilsService.getDistanceFromLatLngInKm(n.loc,s);if(this.authorizedToClose(t,n,i))n.status="closed",this.notify("The report is now closed","success");else{if(!(i<=.5))return void this.notify("Failed to modify report","warn");n.nonIssueReportCount++,this.notify("The report is now modified","success")}this.$store.dispatch({type:UPDATE_ISSUE,updatedIssue:n}).then(function(t){e.issue=t}).catch(function(e){return console.warn(e)})}else this.notify("Report already closed","warn")},authorizedToClose:function(e,t,s){return e._id===t.reportedBy||e.isAdmin||2===t.nonIssueReportCount&&s<=.5},notify:function(e,t){this.$notify({group:"foo",title:"Report Status",text:e,type:t,duration:3e3})},openInfoWindow:function(e){this.setInfoWindowTemplate(e),this.infoWindow.position=e.loc,this.infoWindow.open=!0,this.infoWindow.currIssueId=e._id},goToIssue:function(){this.$router.push("/issue/".concat(this.infoWindow.currIssueId))},setInfoWindowTemplate:function(e){var t='\n          <h2 style="text-transform: capitalize; text-align: center; font-size: 1.4em; margin-bottom: 5px">'.concat(e.title,'</h2>\n          <img src="').concat(e.imgUrls[0],'" style="max-width: 150px; margin: 0 auto" />\n      ');this.infoWindow.template=t}},mounted:function(){var e=this;this.$refs.map.$mapPromise.then(function(){e.mapLoaded=!0})},components:{issueListCmp:gt,issuePreviewCmp:mt,autoComplete:vt["default"]}},bt=yt,wt=(s("gD+U"),Object(p["a"])(bt,Fe,He,!1,null,"094d8ba9",null)),_t=wt.exports,jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.issue?s("section",{staticClass:"issue-details container flex column"},[s("div",{staticClass:"issue-header flex space-between align-center"},[s("h1",{staticClass:"issue-title"},[e._v(e._s(e.issue.title))]),s("button",{on:{click:e.resolveIssue}},[s("font-awesome-icon",{attrs:{icon:"check"}}),e._v("\n          Resolve\n        ")],1)]),"closed"===e.issue.status?s("div",{staticClass:"resolved-stamp flex"},[s("font-awesome-icon",{attrs:{icon:"check"}}),s("h3",[e._v("Issue Resolved")])],1):e._e(),s("div",{staticClass:"issue-content"},[s("div",{staticClass:"issue-info"},[s("p",[e._v(e._s(e.issue.desc))]),s("h5",[e._v("\n              Category: "),s("label",[e._v(e._s(e.issue.category))])]),s("h5",[e._v("\n              Status: "),s("label",[e._v(e._s(e.issue.status))])]),s("h5",[e._v("\n              Reported "),s("label",[e._v(e._s(e._f("relativeTime")(e.issue.createdAt)))])])]),s("carousel",{attrs:{perPage:1,paginationEnabled:!1,navigationEnabled:e.issue.imgUrls.length>1}},e._l(e.issue.imgUrls,function(t,n){return s("slide",{key:n},[s("img",{attrs:{src:t,title:e.issue.title,alt:e.issue.title}})])})),e.issue.loc?s("GmapMap",{attrs:{center:e.issue.loc,zoom:17,"map-type-id":"terrain"}},[s("GmapMarker",{attrs:{position:e.issue.loc,clickable:!1,icon:"img/map-icons/"+e.issue.category+"-"+e.issue.status+".png"}})],1):e._e()],1),s("div",{staticClass:"issue-comments"},[s("h2",[e._v("Communicate")]),s("div",{staticClass:"new-message comment-container flex row"},[s("div",{staticClass:"commenter"},[e.user?s("img",{attrs:{src:e.user.imgUrl}}):s("img",{attrs:{src:"http://via.placeholder.com/150x150"}}),e.user?s("h6",[e._v(e._s(e.user.username))]):s("h6",[e._v("Unknown")])]),s("div",{staticClass:"add-comment"},[s("form",{staticClass:" flex align-center space-between"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"user-input",attrs:{placeholder:"Care to contribute?",type:"text"},domProps:{value:e.newMessage},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addComment(t):null},input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),s("button",{staticClass:"btn send-btn",on:{click:function(t){return t.preventDefault(),e.addComment(t)}}},[s("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1)])])]),s("div",{staticClass:"comments-container"},e._l(e.reverseComments,function(t){return s("div",{key:t._id,staticClass:"comment-container flex"},[s("div",{staticClass:"commenter"},[s("img",{attrs:{src:t.commenter.imgUrl}}),s("h6",[e._v(e._s(t.commenter.username))])]),s("div",{staticClass:"comment-content flex column space-between"},[s("p",[e._v(e._s(t.txt))]),s("p",{staticClass:"comment-time"},[e._v(e._s(e._f("relativeTime")(t.createdAt)))])])])}))])]):e._e()},Ct=[],kt=s("CmN8"),It=s.n(kt),Ot={data:function(){return{issue:null,comments:[],newMessage:""}},created:function(){var e=this.$route.params.issueId;this.getIssue(e),this.getComments(e)},methods:{getIssue:function(e){var t=this;this.$store.dispatch({type:ze,issueId:e}).then(function(e){t.issue=e}).catch(function(e){return console.warn(e)})},getComments:function(e){var t=this;this.$store.dispatch({type:pe,getBy:{issueId:e}}).then(function(e){t.comments=e,console.log(t.comments)}).catch(function(e){return console.warn(e)})},addComment:function(){if(this.user){var e={comment:{issueId:this.issue._id,commenterId:this.user._id,txt:this.newMessage,createdAt:Date.now()},commenter:this.user};this.newMessage="",this.notify("Your comment was added","success","Comment Status"),this.$socket.emit("commentSent",e)}else this.$modal.show("loginModal")},resolveIssue:function(){var e=this;if("closed"!==this.issue.status)if(this.user){var t=this.$store.getters[G],s=JSON.parse(JSON.stringify(this.issue)),n=st.getDistanceFromLatLngInKm(s.loc,t);if(this.authorizedToClose(this.user,s,n))s.status="closed",this.notify("The report is now closed","success","Report Status");else{if(!(n<=.5))return void this.notify("Failed to modify report","warn","Report Status");s.nonIssueReportCount++,this.notify("The report is now recognaized","success","Report Status")}this.$store.dispatch({type:Re,updatedIssue:s}).then(function(t){e.issue=t}).catch(function(e){return console.warn(e)})}else this.$modal.show("loginModal");else this.notify("Report already closed","warn")},authorizedToClose:function(e,t,s){return e._id===t.reportedBy||e.isAdmin||2===t.nonIssueReportCount&&s<=.5},notify:function(e,t,s){this.$notify({group:"foo",title:s,text:e,type:t,duration:5e3})},deleteIssue:function(){var e=this;this.$store.dispatch({type:ge,deleteBy:{issueId:this.issue._id}}).then(function(){e.$store.dispatch({type:Je,issueId:e.issue._id}).then(function(){console.log("issue deleted"),e.notify(e.issue.title+" deleted","success","Report Delete"),e.$router.push("/")}).catch(function(e){return console.warn(e)})}).catch(function(e){return console.warn(e)})},deleteComment:function(e){var t=this;this.$store.dispatch({type:ge,deleteBy:{_id:e}}).then(function(){t.comments=t.$store.getters[be]}).catch(function(e){return console.warn})}},computed:{user:function(){return this.$store.getters[H]},reverseComments:function(){return this.comments.reverse()}},directives:{focus:{inserted:function(e){e.focus()}}},components:{Carousel:kt["Carousel"],Slide:kt["Slide"]}},xt=Ot,St=(s("x2hd"),Object(p["a"])(xt,jt,Ct,!1,null,"f92ef258",null)),$t=St.exports,Lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"issue-add container flex column align-center"},[s("GmapMap",{attrs:{center:e.mapCenter,zoom:17,"map-type-id":"terrain"},on:{click:e.setCenter}},[s("GmapMarker",{attrs:{position:e.center,clickable:!0,draggable:!1,animation:2,icon:"img/map-icons/"+e.newIssue.category+"-open.png"}})],1),s("form",{staticClass:"flex column ",attrs:{"action.prevent":""}},[s("div",{staticClass:"location-input flex align-baseline"},[s("autoComplete",{attrs:{placeholder:"Address (required)"},on:{place_changed:e.placeChanged},model:{value:e.newIssue.address,callback:function(t){e.$set(e.newIssue,"address",t)},expression:"newIssue.address"}}),s("button",{on:{click:function(t){return t.preventDefault(),e.setLocationSelf(t)}}},[e._v("my location")])],1),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newIssue.title,expression:"newIssue.title"}],attrs:{type:"text",placeholder:"Title (required)",maxlength:"25"},domProps:{value:e.newIssue.title},on:{input:function(t){t.target.composing||e.$set(e.newIssue,"title",t.target.value)}}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newIssue.desc,expression:"newIssue.desc"}],staticClass:"desc-input",attrs:{placeholder:"Description (required)"},domProps:{value:e.newIssue.desc},on:{input:function(t){t.target.composing||e.$set(e.newIssue,"desc",t.target.value)}}}),s("img-upload",{on:{imgsUploaded:e.saveURLs}},[e._v("Upload "),s("font-awesome-icon",{staticClass:"active",attrs:{icon:"camera"}})],1),s("label",{staticClass:"flex"},[e._v("Category:\n      "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.newIssue.category,expression:"newIssue.category"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.newIssue,"category",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"pedestrian"}},[e._v("Pedestrian")]),s("option",{attrs:{value:"garbage"}},[e._v("Garbage")]),s("option",{attrs:{value:"construction"}},[e._v("Construction")])])]),e._m(0),s("button",{on:{click:function(t){return t.preventDefault(),e.promptUser(t)}}},[e._v("submit")])],1),s("modal",{attrs:{name:"hello-world"}},[e._v("\n      hello, world!\n    ")])],1)},Ut=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{staticClass:"anonymous"},[s("input",{attrs:{type:"checkbox"}}),e._v("\n      Submit as anonymous\n    ")])}],Nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",[e._t("default",[e._v("default")]),s("input",{attrs:{type:"file",accept:"image/*",multiple:!e.single},on:{change:function(t){e.upload(t.target.files)}}})],2)},Dt=[],At={props:{single:{type:Boolean,required:!1,default:!1}},data:function(){return{cloudinary:{uploadPreset:"qtz1qjeq",apiKey:"746648462286187",cloudName:"djewvb6ty"}}},computed:{clUrl:function(){return"https://api.cloudinary.com/v1_1/".concat(this.cloudinary.cloudName,"/upload")}},methods:{upload:function(e){for(var t,s=[],n=this,i=0;i<e.length;i++)t=new FormData,t.append("file",e[i]),t.append("upload_preset",this.cloudinary.uploadPreset),s[i]=P.a.post(this.clUrl,t);Promise.all(s).then(function(e){return e.map(function(e){return e.data.url})}).then(function(e){n.$emit("imgsUploaded",e)})}}},Tt=At,Mt=(s("8U93"),Object(p["a"])(Tt,Nt,Dt,!1,null,"36fedd52",null)),Pt=Mt.exports,Et={components:{autoComplete:vt["default"],imgUpload:Pt},data:function(){return{newIssue:{title:"",address:"",desc:"",category:"pedestrian",status:"open",imgUrls:[],nonIssueReportCount:0,likes:{likeHappy:0,likeSad:0,likeAngry:0,likeShocked:0,likeDisgusted:0}},mapCenter:{lat:10,lng:10},center:{lat:10,lng:10},isAnon:!1}},watch:{center:{handler:function(e,t){var s=this;r.convertCoordsToAddress(e).then(function(e){s.newIssue.address=e})},deep:!0}},computed:{currLoc:function(){return this.$store.getters[G]}},methods:{promptUser:function(){var e=this;this.$store.getters[H]||this.$store.getters[q]?e.onSubmit():(this.$store.commit(F),this.$modal.show("dialog",{title:"YOU ARE NOT LOGGED IN",text:"Not being logged in prevents us from providing you with the best service that you deserve.",buttons:[{title:"Tell me more",handler:function(){e.$modal.hide("dialog"),e.$modal.show("loginModal")}},{title:"Maybe next time",handler:function(){e.$modal.hide("dialog"),e.onSubmit()}}]}))},saveURLs:function(e){this.newIssue.imgUrls=e},placeChanged:function(e){var t=e.geometry.location,s=[t.lat(),t.lng()];this.center.lat=s[0],this.center.lng=s[1]},onSubmit:function(){if(this.newIssue.title&&this.newIssue.desc&&this.newIssue.address){var e=this.$store.getters[H],t=e?this.$store.getters[H]._id:"";0===this.newIssue.imgUrls.length&&this.newIssue.imgUrls.push("https://res.cloudinary.com/djewvb6ty/image/upload/v1532962154/placeholder.png");var s=JSON.parse(JSON.stringify(this.newIssue));s.loc=JSON.parse(JSON.stringify(this.center)),s.loc.lat=s.loc.lat,s.loc.lng=s.loc.lng,this.isAnon||(s.reportedBy=t),this.$socket.emit("issueAdd",s),this.$notify({group:"foo",title:"Important message",text:this.newIssue.title+" added successfuly!",type:"success",duration:5e3}),this.$router.push("/")}else this.$modal.show("dialog",{title:"MISSING DETAILS",text:"One or more of the required field are missing, please make sure you fill them all.",buttons:[{title:"close"}]})},setLocationSelf:function(){var e=this,t=this.$store.getters[G];t?(this.center=JSON.parse(JSON.stringify(t)),this.mapCenter=JSON.parse(JSON.stringify(this.center))):navigator.geolocation.getCurrentPosition(function(t){e.center={lat:t.coords.latitude,lng:t.coords.longitude},e.mapCenter=JSON.parse(JSON.stringify(e.center)),e.$store.commit({type:Q,currLoc:e.center})})},setCenter:function(e){var t=[e.latLng.lat(),e.latLng.lng()];this.center.lat=t[0],this.center.lng=t[1]}},created:function(){this.setLocationSelf()}},zt=Et,Rt=(s("H8Of"),Object(p["a"])(zt,Lt,Ut,!1,null,"09f54c95",null)),Jt=Rt.exports,Bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.user&&e.issues&&e.comments?s("section",{staticClass:"user-profile main-user-container"},[s("div",{staticClass:"top-user-container flex column"},[s("H1",[e._v(e._s(e.user.username))]),s("div",{staticClass:"img-container"},[s("img",{attrs:{src:e.user.imgUrl}})]),s("div",{staticClass:"upload-container flex align-center space-between"},[s("imgUpload",{staticClass:"img-uploader",on:{imgsUploaded:e.saveURL}},[s("span",{staticClass:"upload"},[e._v("Upload")]),s("font-awesome-icon",{staticClass:"active",attrs:{icon:"camera"}})],1),s("button",{staticClass:"upload-btn",on:{click:e.uploadPic}},[e._v("Save")])],1)],1),s("div",{staticClass:"right-side flex column"},[s("div",{staticClass:"toggle-btns flex"},[s("button",{class:{active:!e.toggleStatus},attrs:{disabled:!e.toggleStatus},on:{click:e.toggleContent}},[e._v("User Reports")]),s("button",{class:{active:e.toggleStatus},attrs:{disabled:e.toggleStatus},on:{click:e.toggleContent}},[e._v("User Comments")])]),s("div",{staticClass:"user-info flex",class:{commentsSlide:e.toggleStatus,issuesSlide:!e.toggleStatus}},[s("user-Issues",{staticClass:"issues-container",attrs:{userIssues:e.issues}}),s("user-comments",{staticClass:"comments-container",attrs:{userComments:e.comments}})],1)])]):e._e()},Vt=[],Wt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.userIssues?s("section",{staticClass:"user-issues"},e._l(e.userIssues,function(t){return s("div",{key:t._id,staticClass:"issue-container flex",on:{click:function(s){e.routeToIssue(t._id)}}},[s("div",{staticClass:"issue-img-container",style:{backgroundImage:"url('"+t.imgUrls[0]+"')"}}),s("div",{staticClass:"issue-content flex column"},[s("H3",[e._v(e._s(t.title))]),s("div",[e._v(e._s(t.desc))])],1)])})):e._e()},Kt=[],Qt={name:"userIssues",props:["userIssues"],data:function(){return{}},created:function(){},methods:{routeToIssue:function(e){this.$router.push("/issue/".concat(e))}}},Yt=Qt,Ft=(s("bQZn"),Object(p["a"])(Yt,Wt,Kt,!1,null,"40a8d6eb",null)),Ht=Ft.exports,Gt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.comments?s("section",{staticClass:"user-comments"},e._l(e.comments,function(t){return s("div",{key:t._id,staticClass:"comment-container flex",on:{click:function(s){e.routeToIssue(t.issue[0]._id)}}},[s("div",{staticClass:"issue-img-container",style:{backgroundImage:"url('"+t.issue[0].imgUrls[0]+"')"}}),s("div",{staticClass:"issue-content flex column"},[s("H3",[e._v(e._s(t.issue[0].title))]),s("div",[e._v(e._s(t.txt))])],1)])})):e._e()},qt=[],Xt={name:"userComments",props:["userComments"],data:function(){return{comments:null}},created:function(){var e=this;this.$store.dispatch({type:Ee,getBy:{}}).then(function(t){e.getComments(t)}).catch(function(e){return console.warn(e)})},methods:{getComments:function(e){var t=JSON.parse(JSON.stringify(this.userComments));this.comments=t.map(function(t){var s=e.filter(function(e){return e._id===t.issueId});if(s)return t.issue=s,t})},routeToIssue:function(e){this.$router.push("/issue/".concat(e))}}},Zt=Xt,es=(s("Qdve"),Object(p["a"])(Zt,Gt,qt,!1,null,"0c0b8834",null)),ts=es.exports,ss={data:function(){return{toggleStatus:!1,user:null,issues:null,comments:null}},created:function(){if(this.user=this.$store.getters[H],!this.user)return this.$modal.show("loginModal"),void this.$router.push("/");this.getIssues(),this.getComments()},methods:{toggleContent:function(){this.toggleStatus=!this.toggleStatus},getIssues:function(){var e=this;this.$store.dispatch({type:Ee,getBy:{reportedBy:this.user._id}}).then(function(t){e.issues=t}).catch(function(e){return console.warn(e)})},getComments:function(){var e=this;this.$store.dispatch({type:pe,getBy:{commenterId:this.user._id}}).then(function(t){e.comments=t}).catch(function(e){return console.warn(e)})},saveURL:function(e){console.log(e),this.user.imgUrl=e},uploadPic:function(){this.$store.dispatch({type:Z,user:this.user}).then(function(e){return console.log("user updated")}).catch(function(e){return console.warn(e)})}},components:{userIssues:Ht,userComments:ts,imgUpload:Pt}},ns=ss,is=(s("/Rr3"),Object(p["a"])(ns,Bt,Vt,!1,null,"4280f4e6",null)),os=is.exports;n["default"].use(Ye["a"]);var rs=new Ye["a"]({routes:[{path:"/",name:"home",component:_t},{path:"/issue/:issueId",name:"issueDetails",component:$t},{path:"/issueAdd",name:"issueAdd",component:Jt},{path:"/user",name:"user",component:os}]}),as=s("L2JU");n["default"].use(as["a"]);var cs=new as["a"].Store({state:{},mutations:{},actions:{},modules:{issueModule:Be,commentModule:we,userModule:te}}),us=s("lIOY");Object(us["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var ls=s("dV7z"),ds=(s("wcMv"),s("gFX4")),ms=s.n(ds),fs=s("ChK9"),ps=s.n(fs),hs=s("wd/R"),gs=s.n(hs),vs=s("7pj7"),ys=s.n(vs),bs=s("GIGG"),ws=s.n(bs),_s=s("7O5W"),js=s("wHSu"),Cs=s("elWB"),ks=ks="/";n["default"].use(ps.a,ms()(ks)),n["default"].use(ys.a),_s["library"].add(js["a"]),_s["library"].add(js["c"]),_s["library"].add(js["h"]),_s["library"].add(js["e"]),_s["library"].add(js["i"]),_s["library"].add(js["d"]),_s["library"].add(js["g"]),_s["library"].add(js["f"]),_s["library"].add(js["b"]),n["default"].component("font-awesome-icon",Cs["FontAwesomeIcon"]),P.a.defaults.crossDomain=!0,n["default"].config.productionTip=!1,n["default"].use(ws.a,{dialog:!0}),n["default"].use(ls,{load:{key:"AIzaSyAKgxLxUePB9fjgJ2D-IcAwXtx8BW9xEdg",libraries:"places"}}),n["default"].use(It.a),n["default"].filter("distanceUnit",function(e){return e&&"Distance Unknown"!==e?e.toString().length<=3?"meters from you":"KMs from you":""}),n["default"].filter("relativeTime",function(e){return gs()(e).fromNow()}),new n["default"]({router:rs,store:cs,render:function(e){return e(Qe)}}).$mount("#app")},Xr0W:function(e,t,s){},bQZn:function(e,t,s){"use strict";var n=s("cPpE"),i=s.n(n);i.a},cPpE:function(e,t,s){},"gD+U":function(e,t,s){"use strict";var n=s("uAIJ"),i=s.n(n);i.a},gJm7:function(e,t,s){},i6A0:function(e,t,s){},kMsj:function(e,t,s){"use strict";var n=s("xF/V"),i=s.n(n);i.a},mgpI:function(e,t,s){},nVo3:function(e,t,s){"use strict";var n=s("NQ1T"),i=s.n(n);i.a},uAIJ:function(e,t,s){},wcMv:function(e,t,s){},wyWl:function(e,t,s){"use strict";var n=s("Xr0W"),i=s.n(n);i.a},x2hd:function(e,t,s){"use strict";var n=s("O0XT"),i=s.n(n);i.a},"xF/V":function(e,t,s){},yOfz:function(e,t,s){"use strict";var n=s("S1Y4"),i=s.n(n);i.a}});
//# sourceMappingURL=app.72387c40.js.map